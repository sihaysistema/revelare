{"version":3,"file":"revelar.min.js","sources":["../../../../apps/revelare/revelare/public/js/revelar.js"],"sourcesContent":["// Copyright (c) 2018, Si Hay Sistema (SHS) and contributors\n// For license information, please see license.txt\n\n/*\n// --- FUNCIONALIDAD EXTRA ---\n\n// TO FIX: 1. Cuando se crea un nuevo producto desde un dialogo.\n//         2. Recomendar no utilizar el dialogo para crear productos, sino a pantalla completa para acceder a todas las funciones\n//            Se puede desactivar el dialogo personalizando el formulario correspondiente.\n// frappe.ui.form.on(\"Item\", {\n//     // VERIFICACION AL GUARDAR DOCUMENTO: Cuando se guardar el documento, verificara en la tabla hija 'uoms'\n//     // que exista un elemento default, si no existe un elemento default no permitira guardar el documento.\n//     validate: function (frm, cdt, cdn) {\n//         if (cur_frm.doc.uoms === undefined) {\n//             frappe.msgprint('Por favor selecciona una unidad de medida default para Sales Analitycs 2');\n//             frm.disable_save();\n//         } else {\n//             let uncheck = 0;\n//             frm.doc.uoms.forEach((uom_element, index) => {\n//                 if (uom_element.revelare_default_uom_sales_analytics_2) {\n//                     frm.enable_save();\n//                     uncheck++;\n//                 }\n//             });\n//             if (uncheck < 1) {\n//                 // FIX MESSAGE\n//                 frappe.msgprint('Por favor selecciona una unidad de medida default para Sales Analitycs');\n//                 frm.disable_save();\n//             }\n//         }\n//     }\n// });\n*/\n\n// UOM Conversion Detail TABLA HIJA DE Item\nfrappe.ui.form.on('UOM Conversion Detail', {\n    // Ejecuta la funcion cuando exista una interaccion con 'revelare_default_uom_sales_analytics_2'\n    revelare_default_uom_sales_analytics_2: function (frm, cdt, cdn) {\n        let check = 0;\n        // Recorre los elementos de la tabla hija ubicandose exactamente en la fila en que \n        // estemos trabajando, esto para obtener datos exactos.\n        frm.doc.uoms.forEach((uom_row_i, index_i) => {\n            if (uom_row_i.name == cdn) {\n                (uom_row_i.revelare_default_uom_sales_analytics_2) ? frm.enable_save() : console.log('unckecked');\n                // FORMA 2! RECOMENDADA ES5 > :)\n                // Unicamente va permitir que exista un elemento seleccionado\n                frm.doc.uoms.forEach((uom_row, indice) => {\n                    if (uom_row.revelare_default_uom_sales_analytics_2) {\n                        check++;\n                        if (check > 1) {\n                            frappe.msgprint('Solamente debe haber un elemento seleccionado');\n                            frm.doc.uoms[index_i].revelare_default_uom_sales_analytics_2 = 0;\n                            refresh_field('uoms');\n                            // console.log(uom_row_i.revelare_default_uom_sales_analytics_2)\n                        }\n                    }\n                });\n            }\n        });\n    }\n});\n\n// Validando CustomField Journal Entry Account\nfrappe.ui.form.on('Journal Entry', {\n    setup : function(frm){\n        cur_frm.set_query(\"inflow_component\", \"accounts\", function () {\n            return {\n                \"filters\": {\n                    \"is_group\": 0,\n                    \"cash_effect\":\"Inflow\"\n                }\n            };\n        });\n        cur_frm.set_query(\"outflow_component\", \"accounts\", function () {\n            return {\n                \"filters\": {\n                    \"is_group\": 0,\n                    \"cash_effect\":\"Outflow\"\n                }\n            };\n        });\n    }, \n    before_save : function(frm){\n        length_accounts = frm.doc.accounts.length;\n        if(length_accounts > 1){\n            accounts = cur_frm.doc.accounts;\n            accounts.forEach(element => console.log(element.account_type));\n        }\n    }\n});\n\n// Funcionalidad sobre tabla hija en Journal Entry\nfrappe.ui.form.on('Journal Entry Account', {\n    account : function(frm, cdt,cdn){\n        validate_cash_flow_component(frm, cdt, cdn);\n    },\n    party_type : function(frm, cdt,cdn){\n        let row = frappe.get_doc(cdt, cdn);\n        if(row.party_type == 'Customer'){\n            // Dandode el valor al campo respecto a Party Type\n            cur_frm.set_value(row.inflow_component,'Receipts from Customers');\n        }\n        frm.refresh();\n    }, \n    debit_in_account_currency : function(frm,cdt,cdn){\n        validate_cash_flow_component(frm, cdt, cdn, field='debit');\n    },\n    credit_in_account_currency : function(frm,cdt,cdn){\n        validate_cash_flow_component(frm, cdt, cdn, field='credit');\n    },\n    form_render : function(frm, cdt, cdn){\n        validate_cash_flow_component(frm, cdt, cdn);\n    }\n});\n\nfunction validate_cash_flow_component(frm, cdt, cdn, field=''){\n    //Creamos objeto de la tabla hija\n    let row = frappe.get_doc(cdt, cdn);\n    // Validamos con un booleano si desde python el tipo de cuenta es 'cash' o 'bank'\n    frappe.call({\n        method: 'revelare.data.get_type_account',\n        args: {\n            account_name: row.account\n        },\n        callback: (r) => {\n            console.log(r.message)\n            if(r.message == true){\n                // En el campo debito, si el debito es = 0 y el credito es > 0\n                if(row.credit_in_account_currency > 0 && (row.debit_in_account_currency == 0 || row.debit_in_account_currency == undefined)){\n                    // Hacemos visible el campo outflow_component\n                    let df=frappe.meta.get_docfield(\"Journal Entry Account\", \"outflow_component\",frm.doc.name);\n                    df.hidden=0;\n        \n                    // Y ocultamos el campo inflow_component\n                    let df2=frappe.meta.get_docfield(\"Journal Entry Account\", \"inflow_component\",frm.doc.name);\n                    df2.hidden=1;\n                    row.debit_in_account_currency = 0\n                // En el campo debito, si el debito es = 0 y el credito es > 0\n                }else if(row.debit_in_account_currency > 0 && (row.credit_in_account_currency == 0 || row.credit_in_account_currency == undefined)){\n                    // Hacemos visible el campo inflow_component\n                    let df=frappe.meta.get_docfield(\"Journal Entry Account\", \"inflow_component\",frm.doc.name);\n                    df.hidden=0;\n        \n                    // Y ocultamos el campo outflow_component\n                    let df2=frappe.meta.get_docfield(\"Journal Entry Account\", \"outflow_component\",frm.doc.name);\n                    df2.hidden=1;\n                    row.credit_in_account_currency = 0\n                } else if(row.debit_in_account_currency > 0 && row.credit_in_account_currency > 0){\n                    // Si estamos en el campo de credit ocultamos el inflow\n                    if (field == 'credit'){\n                        let df=frappe.meta.get_docfield(\"Journal Entry Account\", \"inflow_component\",frm.doc.name);\n                        df.hidden=1;\n                        let df2=frappe.meta.get_docfield(\"Journal Entry Account\", \"outflow_component\",frm.doc.name);\n                        df2.hidden=0;\n                        row.debit_in_account_currency = 0\n                    // Si estamos en el campo de debit ocultamos el outflow\n                    } else if(field == 'debit'){\n                        let df=frappe.meta.get_docfield(\"Journal Entry Account\", \"inflow_component\",frm.doc.name);\n                        df.hidden=0;\n                        let df2=frappe.meta.get_docfield(\"Journal Entry Account\", \"outflow_component\",frm.doc.name);\n                        df2.hidden=1;\n                        row.credit_in_account_currency = 0\n                    }\n                } else if((row.credit_in_account_currency == undefined) &&(row.debit_in_account_currency == undefined)) {\n                    // Hacemos visible el campo inflow_component\n                    let df=frappe.meta.get_docfield(\"Journal Entry Account\", \"inflow_component\",frm.doc.name);\n                    df.hidden=0;\n\n                    // Y ocultamos el campo outflow_component\n                    let df2=frappe.meta.get_docfield(\"Journal Entry Account\", \"outflow_component\",frm.doc.name);\n                    df2.hidden=1;\n                } else{\n                    // Ocultamos los dos campos\n                    let df=frappe.meta.get_docfield(\"Journal Entry Account\", \"inflow_component\",frm.doc.name);\n                    df.hidden=1;\n\n                    let df2=frappe.meta.get_docfield(\"Journal Entry Account\", \"outflow_component\",frm.doc.name);\n                    df2.hidden=1;\n                }\n                frm.refresh();\n            } else {\n                // Ocultamos el campo inflow_component\n                let df=frappe.meta.get_docfield(\"Journal Entry Account\", \"inflow_component\",frm.doc.name);\n                df.hidden=1;\n\n                // Ocultamos el campo direct_cash_flow_component\n                let df2=frappe.meta.get_docfield(\"Journal Entry Account\", \"outflow_component\",frm.doc.name);\n                df2.hidden=1;\n\n                row.inflow_component = ''\n                row.outflow_component = ''\n                frm.refresh_fields();\n            }\n        }\n    });\n}\n\n\n// Validando customfield de Payment Entry\nfrappe.ui.form.on(\"Payment Entry\", {\n    setup: function(frm) {\n        cur_frm.set_query(\"inflow_component\", function () {\n            return {\n                \"filters\": {\n                    \"is_group\": 0,\n                    \"cash_effect\":\"Inflow\"\n                }\n            };\n        });\n        cur_frm.set_query(\"outflow_component\", function () {\n            return {\n                \"filters\": {\n                    \"is_group\": 0,\n                    \"cash_effect\":\"Outflow\"\n                }\n            };\n        });\n    },\n    refresh :function(frm){\n        // Validamos los campos al momento de que cargue el documento\n        if(cur_frm.doc.payment_type == 'Pay'){\n            // Al ser pago, habilitamos el campo salida de flujo \"outflow\"\n            let df=frappe.meta.get_docfield(\"Payment Entry\", \"outflow_component\",frm.doc.name);\n            df.hidden = 0\n\n            // Al ser pago, deshabilitamos el campo entra de flujo \"inflow\"\n            let df2=frappe.meta.get_docfield(\"Payment Entry\", \"inflow_component\",frm.doc.name);\n            df2.hidden = 1\n        } else if(cur_frm.doc.payment_type == 'Receive'){\n            // Al ser pago, deshabilitamos el campo salida de flujo \"outflow\"\n            let df=frappe.meta.get_docfield(\"Payment Entry\", \"outflow_component\",frm.doc.name);\n            df.hidden = 1\n\n            // Al ser entrada, habilitamos el campo entra de flujo \"inflow\"\n            let df2=frappe.meta.get_docfield(\"Payment Entry\", \"inflow_component\",frm.doc.name);\n            df2.hidden = 0\n        } else {\n            // Al ser transferencia, deshabilitamos los dos campos\n            let df=frappe.meta.get_docfield(\"Payment Entry\", \"outflow_component\",frm.doc.name);\n            df.hidden = 1\n\n            let df2=frappe.meta.get_docfield(\"Payment Entry\", \"inflow_component\",frm.doc.name);\n            df2.hidden = 1\n        }\n    },\n    payment_type : function(frm){\n        console.log(frm.doc.payment_type)\n        if(cur_frm.doc.payment_type == 'Pay'){\n            // Al ser pago, habilitamos el campo salida de flujo \"outflow\"\n            let df=frappe.meta.get_docfield(\"Payment Entry\", \"outflow_component\",frm.doc.name);\n            df.hidden = 0\n\n            // Al ser pago, deshabilitamos el campo entra de flujo \"inflow\"\n            let df2=frappe.meta.get_docfield(\"Payment Entry\", \"inflow_component\",frm.doc.name);\n            df2.hidden = 1\n        } else if(cur_frm.doc.payment_type == 'Receive'){\n            // Al ser pago, deshabilitamos el campo salida de flujo \"outflow\"\n            let df=frappe.meta.get_docfield(\"Payment Entry\", \"outflow_component\",frm.doc.name);\n            df.hidden = 1\n\n            // Al ser entrada, habilitamos el campo entra de flujo \"inflow\"\n            let df2=frappe.meta.get_docfield(\"Payment Entry\", \"inflow_component\",frm.doc.name);\n            df2.hidden = 0\n            console.log('Es Una entrada')\n        } else {\n            // Al ser transferencia, deshabilitamos los dos campos\n            let df=frappe.meta.get_docfield(\"Payment Entry\", \"outflow_component\",frm.doc.name);\n            df.hidden = 1\n\n            let df2=frappe.meta.get_docfield(\"Payment Entry\", \"inflow_component\",frm.doc.name);\n            df2.hidden = 1\n\n        }\n    }\n});\n\n// Función para Direct Cash\nfunction open_detailed_cash_flow_report(name, from_date, to_date){\n    window.open(`#query-report/Cash%20Flow%20Detail?category=${name}&from_date=${from_date}&to_date=${to_date}`);\n    return true;\n};\n\n// Función para Detail Cash Flow\nfunction open_one_tab(name, type){\n    if (type === 'journal_entry'){\n        window.open(`#Form/Journal%20Entry/${name}`);\n    } else if(type === 'payment_entry'){\n        window.open(`#Form/Payment%20Entry/${name}`);\n    }\n    return true;\n};"],"names":["let","df","df2"],"mappings":"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"}