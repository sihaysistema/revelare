(function () {
  'use strict';

  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //
  //

  var script = {
    name: "DataCard",
  };

  /* script */
              var __vue_script__ = script;
              
  /* template */
  var __vue_render__ = function() {
    var _vm = this;
    var _h = _vm.$createElement;
    var _c = _vm._self._c || _h;
    return _c("div", { staticClass: "col-xl-6 col-lg-12" }, [
      _c("div", { staticClass: "card project-card" }, [
        _c("div", { staticClass: "card-body" }, [
          _vm._m(0),
          _vm._v(" "),
          _c("p", { staticClass: "mb-4" }, [
            _vm._v(
              "\n        It is a long established fact that a reader will be distracted by the\n        readable content of a page when looking at its layout.\n      "
            )
          ]),
          _vm._v(" "),
          _c("div", { staticClass: "row mb-4" }, [
            _c("div", { staticClass: "col-sm-6 mb-sm-0 mb-3 d-flex" }, [
              _c("div", { staticClass: "dt-icon bgl-info mr-3" }, [
                _c(
                  "svg",
                  {
                    attrs: {
                      width: "24",
                      height: "24",
                      viewBox: "0 0 24 24",
                      fill: "none",
                      xmlns: "http://www.w3.org/2000/svg"
                    }
                  },
                  [
                    _c("path", {
                      attrs: {
                        d:
                          "M19 5H18V3C18 2.73478 17.8946 2.48043 17.7071 2.29289C17.5196 2.10536 17.2652 2 17 2C16.7348 2 16.4804 2.10536 16.2929 2.29289C16.1054 2.48043 16 2.73478 16 3V5H8V3C8 2.73478 7.89464 2.48043 7.70711 2.29289C7.51957 2.10536 7.26522 2 7 2C6.73478 2 6.48043 2.10536 6.29289 2.29289C6.10536 2.48043 6 2.73478 6 3V5H5C4.20435 5 3.44129 5.31607 2.87868 5.87868C2.31607 6.44129 2 7.20435 2 8V9H22V8C22 7.20435 21.6839 6.44129 21.1213 5.87868C20.5587 5.31607 19.7957 5 19 5Z",
                        fill: "#92caff"
                      }
                    }),
                    _vm._v(" "),
                    _c("path", {
                      attrs: {
                        d:
                          "M2 19C2 19.7956 2.31607 20.5587 2.87868 21.1213C3.44129 21.6839 4.20435 22 5 22H19C19.7957 22 20.5587 21.6839 21.1213 21.1213C21.6839 20.5587 22 19.7956 22 19V11H2V19Z",
                        fill: "#51A6F5"
                      }
                    })
                  ]
                )
              ]),
              _vm._v(" "),
              _vm._m(1)
            ]),
            _vm._v(" "),
            _c("div", { staticClass: "col-sm-6 d-flex" }, [
              _c("div", { staticClass: "dt-icon mr-3 bgl-danger" }, [
                _c(
                  "svg",
                  {
                    attrs: {
                      width: "19",
                      height: "24",
                      viewBox: "0 0 19 24",
                      fill: "none",
                      xmlns: "http://www.w3.org/2000/svg"
                    }
                  },
                  [
                    _c("path", {
                      attrs: {
                        d:
                          "M18.6601 8.6858C18.5437 8.44064 18.2965 8.28427 18.025 8.28427H10.9728L15.2413 1.06083C15.3697 0.843469 15.3718 0.573844 15.2466 0.354609C15.1214 0.135375 14.8884 -9.37014e-05 14.6359 4.86277e-08L8.61084 0.000656299C8.3608 0.000750049 8.12957 0.1335 8.00362 0.349453L0.0958048 13.905C-0.0310859 14.1224 -0.0319764 14.3911 0.0934142 14.6094C0.218805 14.8277 0.451352 14.9624 0.703117 14.9624H7.71037L5.66943 23.1263C5.58955 23.4457 5.74213 23.7779 6.03651 23.9255C6.13691 23.9757 6.24459 24 6.35123 24C6.55729 24 6.75923 23.9094 6.89638 23.7413L18.5699 9.43186C18.7415 9.22148 18.7766 8.93105 18.6601 8.6858V8.6858Z",
                        fill: "#FF4C41"
                      }
                    })
                  ]
                )
              ]),
              _vm._v(" "),
              _vm._m(2)
            ])
          ]),
          _vm._v(" "),
          _vm._m(3),
          _vm._v(" "),
          _vm._m(4)
        ])
      ])
    ])
  };
  var __vue_staticRenderFns__ = [
    function() {
      var _vm = this;
      var _h = _vm.$createElement;
      var _c = _vm._self._c || _h;
      return _c("div", { staticClass: "d-flex mb-4 align-items-start" }, [
        _c("div", { staticClass: "dz-media mr-3" }, [
          _c("img", {
            staticClass: "img-fluid",
            attrs: { src: "images/logos/pic1.jpg", alt: "" }
          })
        ]),
        _vm._v(" "),
        _c("div", { staticClass: "mr-auto" }, [
          _c("p", { staticClass: "text-primary mb-1" }, [_vm._v("#P-000441425")]),
          _vm._v(" "),
          _c("h5", { staticClass: "title font-w600 mb-2" }, [
            _c(
              "a",
              { staticClass: "text-black", attrs: { href: "post-details.html" } },
              [_vm._v("Redesign Zenix Mobile App")]
            )
          ]),
          _vm._v(" "),
          _c("span", [_vm._v("We Create Your Dream")])
        ]),
        _vm._v(" "),
        _c(
          "span",
          { staticClass: "badge badge-success d-sm-inline-block d-none" },
          [_vm._v("Compeleted")]
        )
      ])
    },
    function() {
      var _vm = this;
      var _h = _vm.$createElement;
      var _c = _vm._self._c || _h;
      return _c("div", [
        _c("span", [_vm._v("Start Date")]),
        _vm._v(" "),
        _c("p", { staticClass: "mb-0 pt-1 font-w500 text-black" }, [
          _vm._v("\n              Tuesday,Aug 15th 2020\n            ")
        ])
      ])
    },
    function() {
      var _vm = this;
      var _h = _vm.$createElement;
      var _c = _vm._self._c || _h;
      return _c("div", [
        _c("span", [_vm._v("Deadline")]),
        _vm._v(" "),
        _c("p", { staticClass: "mb-0 pt-1 font-w500 text-black" }, [
          _vm._v("\n              Tuesday,Sep 29th 2020\n            ")
        ])
      ])
    },
    function() {
      var _vm = this;
      var _h = _vm.$createElement;
      var _c = _vm._self._c || _h;
      return _c("div", { staticClass: "d-flex flex-wrap align-items-center" }, [
        _c("div", { staticClass: "mr-auto mb-4" }, [
          _c("p", { staticClass: "mb-2 font-w500 text-black" }, [
            _vm._v("Members")
          ]),
          _vm._v(" "),
          _c("ul", { staticClass: "users-lg" }, [
            _c("li", [
              _c("img", { attrs: { src: "images/users/pic1.jpg", alt: "" } })
            ]),
            _vm._v(" "),
            _c("li", [
              _c("img", { attrs: { src: "images/users/pic2.jpg", alt: "" } })
            ]),
            _vm._v(" "),
            _c("li", [
              _c("img", { attrs: { src: "images/users/pic3.jpg", alt: "" } })
            ]),
            _vm._v(" "),
            _c("li", [
              _c("img", { attrs: { src: "images/users/pic4.jpg", alt: "" } })
            ]),
            _vm._v(" "),
            _c("li", [
              _c("img", { attrs: { src: "images/users/pic5.jpg", alt: "" } })
            ]),
            _vm._v(" "),
            _c("li", [
              _c("img", { attrs: { src: "images/users/pic6.jpg", alt: "" } })
            ]),
            _vm._v(" "),
            _c("li", [
              _c("img", { attrs: { src: "images/users/pic7.jpg", alt: "" } })
            ])
          ])
        ]),
        _vm._v(" "),
        _c("div", { staticClass: "d-flex align-items-center mb-4" }, [
          _c("div", { staticClass: "text-center border-bx mr-3" }, [
            _c("span", [_vm._v("Budget")]),
            _vm._v(" "),
            _c("p", { staticClass: "mb-0 pt-1 font-w500 text-black" }, [
              _vm._v("$505,785")
            ])
          ]),
          _vm._v(" "),
          _c("div", { staticClass: "text-center border-bx" }, [
            _c("span", [_vm._v("Expenses")]),
            _vm._v(" "),
            _c("p", { staticClass: "mb-0 pt-1 font-w500 text-black" }, [
              _vm._v("$458,388")
            ])
          ])
        ])
      ])
    },
    function() {
      var _vm = this;
      var _h = _vm.$createElement;
      var _c = _vm._self._c || _h;
      return _c("div", { staticClass: "row" }, [
        _c("div", { staticClass: "col-6" }, [
          _c("div", [
            _vm._v("\n            Questions:"),
            _c("span", { staticClass: "text-black ml-3 font-w600" }, [
              _vm._v("56")
            ])
          ]),
          _vm._v(" "),
          _c("div", [
            _vm._v("\n            Comments:"),
            _c("span", { staticClass: "text-black ml-3 font-w600" }, [
              _vm._v("200")
            ])
          ])
        ]),
        _vm._v(" "),
        _c("div", { staticClass: "col-6" }, [
          _c("h6", [
            _vm._v("\n            Progress\n            "),
            _c("span", { staticClass: "pull-right" }, [_vm._v("75%")])
          ]),
          _vm._v(" "),
          _c("div", { staticClass: "progress" }, [
            _c("div", {
              staticClass: "progress-bar bg-info progress-animated",
              staticStyle: { width: "75%", height: "6px" },
              attrs: { role: "progressbar" }
            })
          ])
        ])
      ])
    }
  ];
  __vue_render__._withStripped = true;

    /* style */
    var __vue_inject_styles__ = function (inject) {
      if (!inject) { return }
      inject("data-v-e150cc90_0", { source: "\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n", map: {"version":3,"sources":[],"names":[],"mappings":"","file":"DataCard.vue"}, media: undefined });

    };
    /* scoped */
    var __vue_scope_id__ = undefined;
    /* module identifier */
    var __vue_module_identifier__ = undefined;
    /* functional template */
    var __vue_is_functional_template__ = false;
    /* component normalizer */
    function __vue_normalize__(
      template, style, script,
      scope, functional, moduleIdentifier,
      createInjector, createInjectorSSR
    ) {
      var component = (typeof script === 'function' ? script.options : script) || {};

      // For security concerns, we use only base name in production mode.
      component.__file = "/home/mario/frappe-bench/apps/revelare/revelare/public/js/components/DataCard.vue";

      if (!component.render) {
        component.render = template.render;
        component.staticRenderFns = template.staticRenderFns;
        component._compiled = true;

        if (functional) { component.functional = true; }
      }

      component._scopeId = scope;

      {
        var hook;
        if (style) {
          hook = function(context) {
            style.call(this, createInjector(context));
          };
        }

        if (hook !== undefined) {
          if (component.functional) {
            // register for functional component in vue file
            var originalRender = component.render;
            component.render = function renderWithStyleInjection(h, context) {
              hook.call(context);
              return originalRender(h, context)
            };
          } else {
            // inject component registration as beforeCreate hook
            var existing = component.beforeCreate;
            component.beforeCreate = existing ? [].concat(existing, hook) : [hook];
          }
        }
      }

      return component
    }
    /* style inject */
    function __vue_create_injector__() {
      var head = document.head || document.getElementsByTagName('head')[0];
      var styles = __vue_create_injector__.styles || (__vue_create_injector__.styles = {});
      var isOldIE =
        typeof navigator !== 'undefined' &&
        /msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());

      return function addStyle(id, css) {
        if (document.querySelector('style[data-vue-ssr-id~="' + id + '"]')) { return } // SSR styles are present.

        var group = isOldIE ? css.media || 'default' : id;
        var style = styles[group] || (styles[group] = { ids: [], parts: [], element: undefined });

        if (!style.ids.includes(id)) {
          var code = css.source;
          var index = style.ids.length;

          style.ids.push(id);

          if (isOldIE) {
            style.element = style.element || document.querySelector('style[data-group=' + group + ']');
          }

          if (!style.element) {
            var el = style.element = document.createElement('style');
            el.type = 'text/css';

            if (css.media) { el.setAttribute('media', css.media); }
            if (isOldIE) {
              el.setAttribute('data-group', group);
              el.setAttribute('data-next-index', '0');
            }

            head.appendChild(el);
          }

          if (isOldIE) {
            index = parseInt(style.element.getAttribute('data-next-index'));
            style.element.setAttribute('data-next-index', index + 1);
          }

          if (style.element.styleSheet) {
            style.parts.push(code);
            style.element.styleSheet.cssText = style.parts
              .filter(Boolean)
              .join('\n');
          } else {
            var textNode = document.createTextNode(code);
            var nodes = style.element.childNodes;
            if (nodes[index]) { style.element.removeChild(nodes[index]); }
            if (nodes.length) { style.element.insertBefore(textNode, nodes[index]); }
            else { style.element.appendChild(textNode); }
          }
        }
      }
    }
    /* style inject SSR */
    

    
    var DataCard = __vue_normalize__(
      { render: __vue_render__, staticRenderFns: __vue_staticRenderFns__ },
      __vue_inject_styles__,
      __vue_script__,
      __vue_scope_id__,
      __vue_is_functional_template__,
      __vue_module_identifier__,
      __vue_create_injector__,
      undefined
    );

  //

  var script$1 = {
    name: "MainNavigatorDashboard",
    components: {
      DataCard: DataCard,
    },
  };

  /* script */
              var __vue_script__$1 = script$1;
              
  /* template */
  var __vue_render__$1 = function() {
    var _vm = this;
    var _h = _vm.$createElement;
    var _c = _vm._self._c || _h;
    return _c("div", { staticClass: "content-body" }, [
      _c("div", { staticClass: "container-fluid" }, [
        _c("div", { staticClass: "row" }, [_c("DataCard")], 1)
      ])
    ])
  };
  var __vue_staticRenderFns__$1 = [];
  __vue_render__$1._withStripped = true;

    /* style */
    var __vue_inject_styles__$1 = function (inject) {
      if (!inject) { return }
      inject("data-v-7188c5a0_0", { source: "\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n", map: {"version":3,"sources":[],"names":[],"mappings":"","file":"MainNavigatorDashboard.vue"}, media: undefined });

    };
    /* scoped */
    var __vue_scope_id__$1 = undefined;
    /* module identifier */
    var __vue_module_identifier__$1 = undefined;
    /* functional template */
    var __vue_is_functional_template__$1 = false;
    /* component normalizer */
    function __vue_normalize__$1(
      template, style, script,
      scope, functional, moduleIdentifier,
      createInjector, createInjectorSSR
    ) {
      var component = (typeof script === 'function' ? script.options : script) || {};

      // For security concerns, we use only base name in production mode.
      component.__file = "/home/mario/frappe-bench/apps/revelare/revelare/public/js/MainNavigatorDashboard.vue";

      if (!component.render) {
        component.render = template.render;
        component.staticRenderFns = template.staticRenderFns;
        component._compiled = true;

        if (functional) { component.functional = true; }
      }

      component._scopeId = scope;

      {
        var hook;
        if (style) {
          hook = function(context) {
            style.call(this, createInjector(context));
          };
        }

        if (hook !== undefined) {
          if (component.functional) {
            // register for functional component in vue file
            var originalRender = component.render;
            component.render = function renderWithStyleInjection(h, context) {
              hook.call(context);
              return originalRender(h, context)
            };
          } else {
            // inject component registration as beforeCreate hook
            var existing = component.beforeCreate;
            component.beforeCreate = existing ? [].concat(existing, hook) : [hook];
          }
        }
      }

      return component
    }
    /* style inject */
    function __vue_create_injector__$1() {
      var head = document.head || document.getElementsByTagName('head')[0];
      var styles = __vue_create_injector__$1.styles || (__vue_create_injector__$1.styles = {});
      var isOldIE =
        typeof navigator !== 'undefined' &&
        /msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());

      return function addStyle(id, css) {
        if (document.querySelector('style[data-vue-ssr-id~="' + id + '"]')) { return } // SSR styles are present.

        var group = isOldIE ? css.media || 'default' : id;
        var style = styles[group] || (styles[group] = { ids: [], parts: [], element: undefined });

        if (!style.ids.includes(id)) {
          var code = css.source;
          var index = style.ids.length;

          style.ids.push(id);

          if (isOldIE) {
            style.element = style.element || document.querySelector('style[data-group=' + group + ']');
          }

          if (!style.element) {
            var el = style.element = document.createElement('style');
            el.type = 'text/css';

            if (css.media) { el.setAttribute('media', css.media); }
            if (isOldIE) {
              el.setAttribute('data-group', group);
              el.setAttribute('data-next-index', '0');
            }

            head.appendChild(el);
          }

          if (isOldIE) {
            index = parseInt(style.element.getAttribute('data-next-index'));
            style.element.setAttribute('data-next-index', index + 1);
          }

          if (style.element.styleSheet) {
            style.parts.push(code);
            style.element.styleSheet.cssText = style.parts
              .filter(Boolean)
              .join('\n');
          } else {
            var textNode = document.createTextNode(code);
            var nodes = style.element.childNodes;
            if (nodes[index]) { style.element.removeChild(nodes[index]); }
            if (nodes.length) { style.element.insertBefore(textNode, nodes[index]); }
            else { style.element.appendChild(textNode); }
          }
        }
      }
    }
    /* style inject SSR */
    

    
    var MainNavigatorDashboard = __vue_normalize__$1(
      { render: __vue_render__$1, staticRenderFns: __vue_staticRenderFns__$1 },
      __vue_inject_styles__$1,
      __vue_script__$1,
      __vue_scope_id__$1,
      __vue_is_functional_template__$1,
      __vue_module_identifier__$1,
      __vue_create_injector__$1,
      undefined
    );

  frappe.provide('frappe.revelare');   // create a namespace within the Frappe instance

  frappe.revelare.NavigationDashboard = class {   // create a glue class, wich will manage your Vue instance
      constructor(ref) {
      var parent = ref.parent;

          this.$parent = $(parent);
          this.page = parent.page;
          this.setup_header();
          this.make_body();
      }
      make_body() {
          this.$main_navigator_dashboard = this.$parent.find('.layout-main');   // bind the new Vue instance to the main <div> on the page
          this.vue = new Vue({
              el: this.$main_navigator_dashboard[0],
              data: {
                  // timer: ''
              },
              render: function (h) { return h(MainNavigatorDashboard); },

          });
      }
      setup_header() {
      }
  };

  // Copyright (c) 2018, Si Hay Sistema (SHS) and contributors
  // For license information, please see license.txt

  /*
  // --- FUNCIONALIDAD EXTRA ---

  // TO FIX: 1. Cuando se crea un nuevo producto desde un dialogo.
  //         2. Recomendar no utilizar el dialogo para crear productos, sino a pantalla completa para acceder a todas las funciones
  //            Se puede desactivar el dialogo personalizando el formulario correspondiente.
  // frappe.ui.form.on("Item", {
  //     // VERIFICACION AL GUARDAR DOCUMENTO: Cuando se guardar el documento, verificara en la tabla hija 'uoms'
  //     // que exista un elemento default, si no existe un elemento default no permitira guardar el documento.
  //     validate: function (frm, cdt, cdn) {
  //         if (cur_frm.doc.uoms === undefined) {
  //             frappe.msgprint('Por favor selecciona una unidad de medida default para Sales Analitycs 2');
  //             frm.disable_save();
  //         } else {
  //             let uncheck = 0;
  //             frm.doc.uoms.forEach((uom_element, index) => {
  //                 if (uom_element.revelare_default_uom_sales_analytics_2) {
  //                     frm.enable_save();
  //                     uncheck++;
  //                 }
  //             });
  //             if (uncheck < 1) {
  //                 // FIX MESSAGE
  //                 frappe.msgprint('Por favor selecciona una unidad de medida default para Sales Analitycs');
  //                 frm.disable_save();
  //             }
  //         }
  //     }
  // });
  */

  // UOM Conversion Detail TABLA HIJA DE Item
  frappe.ui.form.on('UOM Conversion Detail', {
      // Ejecuta la funcion cuando exista una interaccion con 'revelare_default_uom_sales_analytics_2'
      revelare_default_uom_sales_analytics_2: function (frm, cdt, cdn) {
          var check = 0;
          // Recorre los elementos de la tabla hija ubicandose exactamente en la fila en que 
          // estemos trabajando, esto para obtener datos exactos.
          frm.doc.uoms.forEach(function (uom_row_i, index_i) {
              if (uom_row_i.name == cdn) {
                  (uom_row_i.revelare_default_uom_sales_analytics_2) ? frm.enable_save() : console.log('unckecked');
                  // FORMA 2! RECOMENDADA ES5 > :)
                  // Unicamente va permitir que exista un elemento seleccionado
                  frm.doc.uoms.forEach(function (uom_row, indice) {
                      if (uom_row.revelare_default_uom_sales_analytics_2) {
                          check++;
                          if (check > 1) {
                              frappe.msgprint('Solamente debe haber un elemento seleccionado');
                              frm.doc.uoms[index_i].revelare_default_uom_sales_analytics_2 = 0;
                              refresh_field('uoms');
                              // console.log(uom_row_i.revelare_default_uom_sales_analytics_2)
                          }
                      }
                  });
              }
          });
      }
  });

  // Validando CustomField Journal Entry Account
  frappe.ui.form.on('Journal Entry', {
      setup : function(frm){
          cur_frm.set_query("inflow_component", "accounts", function () {
              return {
                  "filters": {
                      "is_group": 0,
                      "cash_effect":"Inflow"
                  }
              };
          });
          cur_frm.set_query("outflow_component", "accounts", function () {
              return {
                  "filters": {
                      "is_group": 0,
                      "cash_effect":"Outflow"
                  }
              };
          });
      }, 
      before_save : function(frm){
          length_accounts = frm.doc.accounts.length;
          if(length_accounts > 1){
              accounts = cur_frm.doc.accounts;
              accounts.forEach(function (element) { return console.log(element.account_type); });
          }
      }
  });

  // Funcionalidad sobre tabla hija en Journal Entry
  frappe.ui.form.on('Journal Entry Account', {
      account : function(frm, cdt,cdn){
          validate_cash_flow_component(frm, cdt, cdn);
      },
      party_type : function(frm, cdt,cdn){
          var row = frappe.get_doc(cdt, cdn);
          if(row.party_type == 'Customer'){
              // Dandode el valor al campo respecto a Party Type
              cur_frm.set_value(row.inflow_component,'Receipts from Customers');
          }
          frm.refresh();
      }, 
      debit_in_account_currency : function(frm,cdt,cdn){
          validate_cash_flow_component(frm, cdt, cdn, field='debit');
      },
      credit_in_account_currency : function(frm,cdt,cdn){
          validate_cash_flow_component(frm, cdt, cdn, field='credit');
      },
      form_render : function(frm, cdt, cdn){
          validate_cash_flow_component(frm, cdt, cdn);
      }
  });

  function validate_cash_flow_component(frm, cdt, cdn, field){
      if ( field === void 0 ) field='';

      //Creamos objeto de la tabla hija
      var row = frappe.get_doc(cdt, cdn);
      // Validamos con un booleano si desde python el tipo de cuenta es 'cash' o 'bank'
      frappe.call({
          method: 'revelare.data.get_type_account',
          args: {
              account_name: row.account
          },
          callback: function (r) {
              console.log(r.message);
              if(r.message == true){
                  // En el campo debito, si el debito es = 0 y el credito es > 0
                  if(row.credit_in_account_currency > 0 && (row.debit_in_account_currency == 0 || row.debit_in_account_currency == undefined)){
                      // Hacemos visible el campo outflow_component
                      var df=frappe.meta.get_docfield("Journal Entry Account", "outflow_component",frm.doc.name);
                      df.hidden=0;
          
                      // Y ocultamos el campo inflow_component
                      var df2=frappe.meta.get_docfield("Journal Entry Account", "inflow_component",frm.doc.name);
                      df2.hidden=1;
                      row.debit_in_account_currency = 0;
                  // En el campo debito, si el debito es = 0 y el credito es > 0
                  }else if(row.debit_in_account_currency > 0 && (row.credit_in_account_currency == 0 || row.credit_in_account_currency == undefined)){
                      // Hacemos visible el campo inflow_component
                      var df$1=frappe.meta.get_docfield("Journal Entry Account", "inflow_component",frm.doc.name);
                      df$1.hidden=0;
          
                      // Y ocultamos el campo outflow_component
                      var df2$1=frappe.meta.get_docfield("Journal Entry Account", "outflow_component",frm.doc.name);
                      df2$1.hidden=1;
                      row.credit_in_account_currency = 0;
                  } else if(row.debit_in_account_currency > 0 && row.credit_in_account_currency > 0){
                      // Si estamos en el campo de credit ocultamos el inflow
                      if (field == 'credit'){
                          var df$2=frappe.meta.get_docfield("Journal Entry Account", "inflow_component",frm.doc.name);
                          df$2.hidden=1;
                          var df2$2=frappe.meta.get_docfield("Journal Entry Account", "outflow_component",frm.doc.name);
                          df2$2.hidden=0;
                          row.debit_in_account_currency = 0;
                      // Si estamos en el campo de debit ocultamos el outflow
                      } else if(field == 'debit'){
                          var df$3=frappe.meta.get_docfield("Journal Entry Account", "inflow_component",frm.doc.name);
                          df$3.hidden=0;
                          var df2$3=frappe.meta.get_docfield("Journal Entry Account", "outflow_component",frm.doc.name);
                          df2$3.hidden=1;
                          row.credit_in_account_currency = 0;
                      }
                  } else if((row.credit_in_account_currency == undefined) &&(row.debit_in_account_currency == undefined)) {
                      // Hacemos visible el campo inflow_component
                      var df$4=frappe.meta.get_docfield("Journal Entry Account", "inflow_component",frm.doc.name);
                      df$4.hidden=0;

                      // Y ocultamos el campo outflow_component
                      var df2$4=frappe.meta.get_docfield("Journal Entry Account", "outflow_component",frm.doc.name);
                      df2$4.hidden=1;
                  } else{
                      // Ocultamos los dos campos
                      var df$5=frappe.meta.get_docfield("Journal Entry Account", "inflow_component",frm.doc.name);
                      df$5.hidden=1;

                      var df2$5=frappe.meta.get_docfield("Journal Entry Account", "outflow_component",frm.doc.name);
                      df2$5.hidden=1;
                  }
                  frm.refresh();
              } else {
                  // Ocultamos el campo inflow_component
                  var df$6=frappe.meta.get_docfield("Journal Entry Account", "inflow_component",frm.doc.name);
                  df$6.hidden=1;

                  // Ocultamos el campo direct_cash_flow_component
                  var df2$6=frappe.meta.get_docfield("Journal Entry Account", "outflow_component",frm.doc.name);
                  df2$6.hidden=1;

                  row.inflow_component = '';
                  row.outflow_component = '';
                  frm.refresh_fields();
              }
          }
      });
  }


  // Validando customfield de Payment Entry
  frappe.ui.form.on("Payment Entry", {
      setup: function(frm) {
          cur_frm.set_query("inflow_component", function () {
              return {
                  "filters": {
                      "is_group": 0,
                      "cash_effect":"Inflow"
                  }
              };
          });
          cur_frm.set_query("outflow_component", function () {
              return {
                  "filters": {
                      "is_group": 0,
                      "cash_effect":"Outflow"
                  }
              };
          });
      },
      refresh :function(frm){
          // Validamos los campos al momento de que cargue el documento
          if(cur_frm.doc.payment_type == 'Pay'){
              // Al ser pago, habilitamos el campo salida de flujo "outflow"
              var df=frappe.meta.get_docfield("Payment Entry", "outflow_component",frm.doc.name);
              df.hidden = 0;

              // Al ser pago, deshabilitamos el campo entra de flujo "inflow"
              var df2=frappe.meta.get_docfield("Payment Entry", "inflow_component",frm.doc.name);
              df2.hidden = 1;
          } else if(cur_frm.doc.payment_type == 'Receive'){
              // Al ser pago, deshabilitamos el campo salida de flujo "outflow"
              var df$1=frappe.meta.get_docfield("Payment Entry", "outflow_component",frm.doc.name);
              df$1.hidden = 1;

              // Al ser entrada, habilitamos el campo entra de flujo "inflow"
              var df2$1=frappe.meta.get_docfield("Payment Entry", "inflow_component",frm.doc.name);
              df2$1.hidden = 0;
          } else {
              // Al ser transferencia, deshabilitamos los dos campos
              var df$2=frappe.meta.get_docfield("Payment Entry", "outflow_component",frm.doc.name);
              df$2.hidden = 1;

              var df2$2=frappe.meta.get_docfield("Payment Entry", "inflow_component",frm.doc.name);
              df2$2.hidden = 1;
          }
      },
      payment_type : function(frm){
          console.log(frm.doc.payment_type);
          if(cur_frm.doc.payment_type == 'Pay'){
              // Al ser pago, habilitamos el campo salida de flujo "outflow"
              var df=frappe.meta.get_docfield("Payment Entry", "outflow_component",frm.doc.name);
              df.hidden = 0;

              // Al ser pago, deshabilitamos el campo entra de flujo "inflow"
              var df2=frappe.meta.get_docfield("Payment Entry", "inflow_component",frm.doc.name);
              df2.hidden = 1;
          } else if(cur_frm.doc.payment_type == 'Receive'){
              // Al ser pago, deshabilitamos el campo salida de flujo "outflow"
              var df$1=frappe.meta.get_docfield("Payment Entry", "outflow_component",frm.doc.name);
              df$1.hidden = 1;

              // Al ser entrada, habilitamos el campo entra de flujo "inflow"
              var df2$1=frappe.meta.get_docfield("Payment Entry", "inflow_component",frm.doc.name);
              df2$1.hidden = 0;
              console.log('Es Una entrada');
          } else {
              // Al ser transferencia, deshabilitamos los dos campos
              var df$2=frappe.meta.get_docfield("Payment Entry", "outflow_component",frm.doc.name);
              df$2.hidden = 1;

              var df2$2=frappe.meta.get_docfield("Payment Entry", "inflow_component",frm.doc.name);
              df2$2.hidden = 1;

          }
      }
  });

}());
//# sourceMappingURL=revelar.min.js.map
